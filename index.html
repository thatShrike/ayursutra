<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AyurSutra - Login Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Tiro+Devanagari+Hindi:wght@400&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
        }
        .hindi {
             font-family: 'Tiro Devanagari Hindi', serif;
        }
        .btn-primary {
            background-color: #0d47a1;
            color: white;
            transition: background-color 0.3s ease;
        }
        .btn-primary:hover {
            background-color: #0a3882;
        }
        .card {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        .modal {
            transition: opacity 0.3s ease-in-out;
        }
        /* Chatbot Styles */
        #chat-fab {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background-color: #0d47a1;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: transform 0.3s ease;
            z-index: 999;
        }
        #chat-fab:hover {
            transform: scale(1.1);
        }
        #chat-widget {
            position: fixed;
            bottom: 7rem;
            right: 2rem;
            width: 90%;
            max-width: 400px;
            height: 70vh;
            max-height: 500px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.2);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease-out, opacity 0.3s ease-out;
            transform: translateY(20px);
            opacity: 0;
            pointer-events: none;
            z-index: 1000;
        }
        #chat-widget.visible {
            transform: translateY(0);
            opacity: 1;
            pointer-events: auto;
        }
        .chat-message {
            padding: 8px 12px;
            border-radius: 12px;
            max-width: 80%;
            word-wrap: break-word;
        }
        .user-message {
            background-color: #0d47a1;
            color: white;
            align-self: flex-end;
        }
        .bot-message {
            background-color: #e2e8f0;
            color: #1e293b;
            align-self: flex-start;
        }
        .spinner {
            border: 3px solid rgba(0, 0, 0, 0.1);
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border-left-color: #0d47a1;
            animation: spin 1s ease infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
         .brand-gradient {
            background: -webkit-linear-gradient(45deg, #1e3a8a, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
    </style>
</head>
<body class="bg-gray-50">
    
    <!-- Welcome Language Modal -->
    <div id="welcomeModal" class="modal fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-[1002] p-4">
        <div class="bg-[#0d47a1] text-white p-8 sm:p-12 rounded-2xl w-full max-w-2xl text-center shadow-2xl">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/55/Emblem_of_India.svg/80px-Emblem_of_India.svg.png" alt="Emblem of India" class="h-16 mx-auto mb-4">
            <p class="font-semibold text-lg" data-translate-key="gov_of_india">Ministry of Ayush, Government of India</p>
            <h2 class="text-4xl font-bold mt-6 hindi" data-translate-key="welcome_hi">‡§Ü‡§Ø‡•Å‡§∑ ‡§Æ‡§Ç‡§§‡•ç‡§∞‡§æ‡§≤‡§Ø ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à</h2>
            <h2 class="text-3xl font-bold" data-translate-key="welcome_en">Welcome to Ministry of Ayush</h2>
            <p class="mt-4 text-gray-200 hindi" data-translate-key="select_lang_hi">‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü ‡§Æ‡•á‡§Ç ‡§™‡•ç‡§∞‡§µ‡•á‡§∂ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§™‡§®‡•Ä ‡§™‡§∏‡§Ç‡§¶‡•Ä‡§¶‡§æ ‡§≠‡§æ‡§∑‡§æ ‡§ï‡§æ ‡§ö‡§Ø‡§® ‡§ï‡§∞‡•á‡§Ç</p>
            <p class="mt-1 text-gray-200" data-translate-key="select_lang_en">Select your Preferred Language to Enter the Website</p>
            <div class="mt-8 flex justify-center gap-4">
                <button id="langBtnHi" class="bg-yellow-500 hover:bg-yellow-600 text-gray-900 font-bold py-3 px-8 rounded-lg transition-transform transform hover:scale-105">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</button>
                <button id="langBtnEn" class="bg-yellow-500 hover:bg-yellow-600 text-gray-900 font-bold py-3 px-8 rounded-lg transition-transform transform hover:scale-105">English</button>
            </div>
        </div>
    </div>


    <div id="loginPage">
        <header>
            <!-- Tricolor Bar -->
            <div style="background: linear-gradient(to right, #FF9933, #FFFFFF, #138808); height: 8px;"></div>
        
            <!-- Main Header -->
            <div class="bg-white shadow-md">
                <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
                    <!-- Left Side: Government Info -->
                    <div class="flex items-center space-x-4">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/55/Emblem_of_India.svg/120px-Emblem_of_India.svg.png" alt="Emblem of India" class="h-16">
                        <div>
                            <p class="font-semibold text-gray-700" data-translate-key="header_gov">Government of India</p>
                            <p class="font-bold text-lg text-blue-800" data-translate-key="header_ministry">Ministry of Ayush</p>
                        </div>
                    </div>
                    
                      <!-- Center: Search and Actions -->
                    <div class="flex-grow flex justify-center items-center gap-4">
                         <form id="search-form" class="flex items-center border-2 border-gray-300 rounded-md overflow-hidden w-full max-w-sm hover:border-blue-700 transition-colors">
                            <input type="search" id="search-input" placeholder="Search..." class="w-full px-4 py-2 text-gray-700 focus:outline-none" data-translate-key="search_placeholder">
                            <button type="submit" class="bg-gray-100 text-blue-800 px-4 py-2 hover:bg-gray-200"><i class="fas fa-search"></i></button>
                        </form>
                         <div class="flex items-center gap-3 text-gray-600 border-l pl-4">
                             <button id="font-decrease" class="hover:text-blue-800" title="Decrease Text Size">A-</button>
                             <button id="font-normal" class="hover:text-blue-800 font-bold" title="Normal Text Size">A</button>
                             <button id="font-increase" class="hover:text-blue-800" title="Increase Text Size">A+</button>
                             <button id="sitemap-btn" class="hover:text-blue-800 ml-2" title="Sitemap"><i class="fas fa-sitemap"></i></button>
                        </div>
                    </div>
        
                     <!-- Right Side: Brand Logo -->
                    <div class="flex items-center space-x-3">
                         <img src="logo.jpg" alt="AyurSutra Logo" class="h-20 w-20">
                         <div class="text-left">
                              <h1 class="text-3xl font-extrabold brand-gradient" data-translate-key="header_app_title">AyurSutra</h1>
                             <p class="text-sm text-gray-500 font-medium" data-translate-key="header_app_subtitle">Panchakarma Management Software</p>
                         </div>
                    </div>
                </div>
            </div>
            
            <!-- Sub-header Navigation -->
            <nav class="bg-blue-800 text-white">
                <div class="max-w-7xl mx-auto px-4">
                    <div class="flex justify-between items-center h-12">
                         <div class="flex items-center space-x-2">
                             <button id="learnMoreBtn" class="text-sm font-medium hover:bg-blue-700 px-3 py-2 rounded-md transition-colors duration-300 flex items-center">
                                 <i class="fas fa-book-open mr-2"></i><span data-translate-key="learn_panchakarma">Learn About Panchakarma</span>
                             </button>
                             <button id="findCenterBtn" class="text-sm font-medium hover:bg-blue-700 px-3 py-2 rounded-md transition-colors duration-300 flex items-center">
                                 <i class="fas fa-map-marker-alt mr-2"></i><span data-translate-key="find_center">Find a Center</span>
                             </button>
                         </div>
                         <div class="flex items-center space-x-2">
                             <a href="#" class="text-sm font-medium hover:bg-blue-700 px-3 py-2 rounded-md transition-colors duration-300 flex items-center">
                                 <i class="fas fa-book mr-2"></i><span data-translate-key="resources">Resources</span>
                             </a>
                             <a href="#" class="text-sm font-medium hover:bg-blue-700 px-3 py-2 rounded-md transition-colors duration-300 flex items-center">
                                 <i class="fas fa-phone-alt mr-2"></i><span data-translate-key="contact_us">Contact Us</span>
                             </a>
                         </div>
                    </div>
                </div>
            </nav>
        </header>

        <main class="max-w-7xl mx-auto px-4 py-8 sm:py-16">
            <div class="grid lg:grid-cols-2 gap-12 items-center">
                <div class="text-center lg:text-left">
                    <h1 class="text-4xl sm:text-5xl font-bold text-blue-900 leading-tight" data-translate-key="main_headline">Authentic Ayurveda, <br>Modern Management.</h1>
                    <p class="mt-4 text-lg text-gray-600" data-translate-key="main_tagline">AyurSutra is a flagship initiative by the Ministry of AYUSH to digitally empower Panchakarma centers, enhance patient care, and promote holistic wellness across the nation.</p>
                </div>

                <div class="card p-8 lg:p-10">
                    <h2 class="text-2xl font-bold text-center text-gray-800 mb-6" data-translate-key="login_portal_title">Login Portal</h2>
                    <div class="space-y-6">
                        <div class="text-center">
                            <div class="text-5xl text-blue-800 mb-2"><i class="fas fa-user-md"></i></div>
                            <h3 class="text-lg font-semibold" data-translate-key="for_practitioners">For Practitioners</h3>
                            <button id="practitionerLoginBtn" class="block mt-2 w-full btn-primary font-semibold py-3 px-4 rounded-lg text-center" data-translate-key="practitioner_login_btn">Practitioner Login</button>
                        </div>
                        <div class="text-center">
                            <div class="text-5xl text-blue-800 mb-2"><i class="fas fa-user"></i></div>
                            <h3 class="text-lg font-semibold" data-translate-key="for_patients">For Patients</h3>
                           <button id="patientLoginBtn" class="block mt-2 w-full btn-primary font-semibold py-3 px-4 rounded-lg text-center" data-translate-key="patient_login_btn">Patient Login</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal fixed inset-0 bg-black bg-opacity-60 hidden items-center justify-center z-50 p-4">
        <div class="card p-6 sm:p-8 rounded-lg w-full max-w-sm relative">
            <button id="closeLoginModalBtn" class="absolute top-4 right-4 text-2xl text-gray-500 hover:text-gray-800">&times;</button>
            <h2 id="loginModalTitle" class="text-2xl font-bold text-blue-900 mb-6 text-center">Login</h2>
            <form id="loginForm">
                <div class="space-y-4">
                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-700" data-translate-key="email_label">Email Address</label>
                        <input type="email" id="email" name="email" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="doctor@ayursutra.gov.in">
                    </div>
                    <div>
                        <label for="otp" class="block text-sm font-medium text-gray-700" data-translate-key="otp_label">OTP</label>
                        <input type="text" id="otp" name="otp" required pattern="\d{6}" title="OTP must be 6 digits" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="123456">
                    </div>
                    <p id="loginErrorMsg" class="text-sm text-red-600 text-center"></p>
                    <div>
                        <button type="submit" class="w-full btn-primary font-semibold py-2 px-4 rounded-lg" data-translate-key="verify_login_btn">Verify & Login</button>
                    </div>
                </div>
            </form>
        </div>
    </div>


    <!-- Panchakarma Info Modal -->
    <div id="infoModal" class="modal fixed inset-0 bg-black bg-opacity-60 hidden items-center justify-center z-50 p-4">
        <div class="card p-6 sm:p-8 rounded-lg w-full max-w-3xl max-h-[90vh] overflow-y-auto relative">
            <button id="closeInfoModalBtn" class="absolute top-4 right-4 text-2xl text-gray-500 hover:text-gray-800">&times;</button>
            <h2 class="text-3xl font-bold text-blue-900 mb-4" data-translate-key="info_modal_title">Understanding Panchakarma</h2>
            <div id="panchakarmaInfo" class="text-gray-700 space-y-4">
                <p data-translate-key="info_modal_p1">Panchakarma is the ultimate Ayurvedic therapy for detoxification and rejuvenation. The name translates to "five actions," referring to the five primary procedures used to cleanse the body of toxins, restore balance to the doshas (Vata, Pitta, Kapha), and enhance the body's innate healing abilities.</p>
                <h3 class="text-xl font-semibold text-gray-800 pt-2" data-translate-key="info_modal_subtitle">The Five Core Procedures</h3>
                <ul class="list-disc list-inside space-y-2">
                    <li data-translate-key="info_modal_l1"><strong>Vamana (Therapeutic Emesis):</strong> A controlled, medically-induced vomiting process to eliminate excess Kapha dosha.</li>
                    <li data-translate-key="info_modal_l2"><strong>Virechana (Therapeutic Purgation):</strong> A medicated purgation therapy that cleanses the gastrointestinal tract.</li>
                    <li data-translate-key="info_modal_l3"><strong>Basti (Medicated Enema):</strong> Considered the mother of all Panchakarma treatments, Basti involves introducing herbal oils into the colon.</li>
                    <li data-translate-key="info_modal_l4"><strong>Nasya (Nasal Administration):</strong> The administration of medicated oils through the nasal passages.</li>
                    <li data-translate-key="info_modal_l5"><strong>Raktamokshana (Bloodletting):</strong> A procedure to cleanse the blood, used in very specific conditions.</li>
                </ul>
            </div>
        </div>
    </div>
    
    <!-- AI Helpbot -->
    <div id="chatbot-container" class="fixed bottom-8 right-8 z-[998]">
        <div id="chatbot-popup" class="absolute bottom-16 right-0 bg-white p-3 rounded-lg shadow-lg text-sm text-center opacity-0 transition-opacity duration-500 ease-out pointer-events-none" style="transform: translateY(10px);">
            <p class="font-semibold" data-translate-key="chatbot_popup_greet">Hey there! üëã</p>
            <p data-translate-key="chatbot_popup_ask">Ask me a question!</p>
            <div class="absolute -bottom-2 right-5 w-0 h-0 border-l-8 border-l-transparent border-t-8 border-t-white border-r-8 border-r-transparent"></div>
        </div>
        <div id="chat-fab">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10c1.848 0 3.582-.505 5.071-1.352L22 22l-1.648-4.929A9.957 9.957 0 0022 12c0-5.514-4.486-10-10-10zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"/><path d="M12 7c-2.757 0-5 2.243-5 5s2.243 5 5 5 5-2.243 5-5-2.243-5-5-5zm0 8c-1.654 0-3-1.346-3-3s1.346-3 3-3 3 1.346 3 3-1.346 3-3 3z"/></svg>
        </div>
    </div>


    <div id="chat-widget" class="">
        <div class="flex flex-col h-full">
            <!-- Header -->
            <div class="bg-blue-900 text-white p-4 flex justify-between items-center rounded-t-lg">
                <h3 class="font-bold text-lg">Prakriti Helpbot</h3>
                <button id="close-chat" class="text-2xl">&times;</button>
            </div>
            <!-- Messages -->
            <div id="chat-messages" class="flex-1 p-4 space-y-4 overflow-y-auto">
                <!-- Initial message will be set by script -->
            </div>
            <!-- Suggestions -->
            <div id="chat-suggestions" class="p-2 border-t flex flex-wrap gap-2">
                 <button class="suggestion-chip text-xs bg-gray-200 hover:bg-gray-300 rounded-full px-3 py-1" data-translate-key="suggestion1">What is Panchakarma?</button>
                 <button class="suggestion-chip text-xs bg-gray-200 hover:bg-gray-300 rounded-full px-3 py-1" data-translate-key="suggestion2">Explain Virechana</button>
                 <button class="suggestion-chip text-xs bg-gray-200 hover:bg-gray-300 rounded-full px-3 py-1" data-translate-key="suggestion3">How does AyurSutra help?</button>
            </div>
            <!-- Input -->
            <div class="p-4 border-t flex items-center space-x-2 bg-gray-50 rounded-b-lg">
                <input type="text" id="chat-input" placeholder="Ask a question..." class="flex-1 w-full border border-gray-300 rounded-full py-2 px-4 focus:outline-none focus:ring-2 focus:ring-blue-500" data-translate-key="chat_placeholder">
                <button id="send-chat" class="bg-blue-800 text-white rounded-full h-10 w-10 flex items-center justify-center">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>
    
    <script>
        // --- TRANSLATION DATA ---
        const translations = {
            en: {
                gov_of_india: "Ministry of Ayush, Government of India",
                welcome_hi: "Welcome to Ministry of Ayush",
                welcome_en: "",
                select_lang_hi: "Select your Preferred Language to Enter the Website",
                select_lang_en: "",
                header_gov: "Government of India",
                header_ministry: "Ministry of Ayush",
                header_app_subtitle: "Panchakarma Management Software",
                learn_panchakarma: "Learn About Panchakarma",
                find_center: "Find a Center",
                resources: "Resources",
                contact_us: "Contact Us",
                main_headline: "Authentic Ayurveda, <br>Modern Management.",
                main_tagline: "AyurSutra is a flagship initiative by the Ministry of AYUSH to digitally empower Panchakarma centers, enhance patient care, and promote holistic wellness across the nation.",
                login_portal_title: "Welcome",
                for_practitioners: "For Practitioners",
                practitioner_login_btn: "Login",
                for_patients: "For Patients",
                patient_login_btn: "Login",
                email_label: "Email Address",
                otp_label: "OTP",
                verify_login_btn: "Verify & Login",
                info_modal_title: "Understanding Panchakarma",
                info_modal_p1: "Panchakarma is the ultimate Ayurvedic therapy for detoxification and rejuvenation...",
                info_modal_subtitle: "The Five Core Procedures",
                info_modal_l1: "<strong>Vamana (Therapeutic Emesis):</strong> A controlled, medically-induced vomiting process...",
                info_modal_l2: "<strong>Virechana (Therapeutic Purgation):</strong> A medicated purgation therapy...",
                info_modal_l3: "<strong>Basti (Medicated Enema):</strong> Considered the mother of all Panchakarma treatments...",
                info_modal_l4: "<strong>Nasya (Nasal Administration):</strong> The administration of medicated oils...",
                info_modal_l5: "<strong>Raktamokshana (Bloodletting):</strong> A procedure to cleanse the blood...",
                suggestion1: "What is Panchakarma?",
                suggestion2: "Explain Virechana",
                suggestion3: "How does AyurSutra help?",
                chat_placeholder: "Ask a question...",
                login_error: "Invalid email or OTP. Please try again.",
                chat_initial_greeting: "Hello! I'm Prakriti. How can I help you?",
                chat_error: "An error occurred. Please check your connection and try again.",
                chatbot_popup_greet: "Hey there! üëã",
                chatbot_popup_ask: "Ask me a question!",
                find_center_prompt: "I can help with that! Please tell me your city or area to find the nearest Panchakarma centers."
            },
            hi: {
                gov_of_india: "‡§Ü‡§Ø‡•Å‡§∑ ‡§Æ‡§Ç‡§§‡•ç‡§∞‡§æ‡§≤‡§Ø, ‡§≠‡§æ‡§∞‡§§ ‡§∏‡§∞‡§ï‡§æ‡§∞",
                welcome_hi: "‡§Ü‡§Ø‡•Å‡§∑ ‡§Æ‡§Ç‡§§‡•ç‡§∞‡§æ‡§≤‡§Ø ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à",
                welcome_en: "Welcome to Ministry of Ayush",
                select_lang_hi: "‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü ‡§Æ‡•á‡§Ç ‡§™‡•ç‡§∞‡§µ‡•á‡§∂ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§™‡§®‡•Ä ‡§™‡§∏‡§Ç‡§¶‡•Ä‡§¶‡§æ ‡§≠‡§æ‡§∑‡§æ ‡§ï‡§æ ‡§ö‡§Ø‡§® ‡§ï‡§∞‡•á‡§Ç",
                select_lang_en: "Select your Preferred Language to Enter the Website",
                header_gov: "‡§≠‡§æ‡§∞‡§§ ‡§∏‡§∞‡§ï‡§æ‡§∞",
                header_ministry: "‡§Ü‡§Ø‡•Å‡§∑ ‡§Æ‡§Ç‡§§‡•ç‡§∞‡§æ‡§≤‡§Ø",
                header_app_subtitle: "‡§™‡§Ç‡§ö‡§ï‡§∞‡•ç‡§Æ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§® ‡§∏‡•â‡§´‡•ç‡§ü‡§µ‡•á‡§Ø‡§∞",
                learn_panchakarma: "‡§™‡§Ç‡§ö‡§ï‡§∞‡•ç‡§Æ ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§®‡•á‡§Ç",
                find_center: "‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞ ‡§ñ‡•ã‡§ú‡•á‡§Ç",
                resources: "‡§∏‡§Ç‡§∏‡§æ‡§ß‡§®",
                contact_us: "‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç",
                main_headline: "‡§™‡•ç‡§∞‡§æ‡§Æ‡§æ‡§£‡§ø‡§ï ‡§Ü‡§Ø‡•Å‡§∞‡•ç‡§µ‡•á‡§¶, <br>‡§Ü‡§ß‡•Å‡§®‡§ø‡§ï ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§®‡•§",
                main_tagline: "‡§Ü‡§Ø‡•Å‡§∏‡•Ç‡§§‡•ç‡§∞ ‡§Ü‡§Ø‡•Å‡§∑ ‡§Æ‡§Ç‡§§‡•ç‡§∞‡§æ‡§≤‡§Ø ‡§ï‡•Ä ‡§è‡§ï ‡§™‡•ç‡§∞‡§Æ‡•Å‡§ñ ‡§™‡§π‡§≤ ‡§π‡•à ‡§ú‡•ã ‡§™‡§Ç‡§ö‡§ï‡§∞‡•ç‡§Æ ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§∏‡§∂‡§ï‡•ç‡§§ ‡§¨‡§®‡§æ‡§®‡•á, ‡§∞‡•ã‡§ó‡•Ä ‡§¶‡•á‡§ñ‡§≠‡§æ‡§≤ ‡§ï‡•ã ‡§¨‡§¢‡§º‡§æ‡§®‡•á ‡§î‡§∞ ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞ ‡§≠‡§∞ ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§ó‡•ç‡§∞ ‡§ï‡§≤‡•ç‡§Ø‡§æ‡§£ ‡§ï‡•ã ‡§¨‡§¢‡§º‡§æ‡§µ‡§æ ‡§¶‡•á‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§π‡•à‡•§",
                login_portal_title: "‡§∏‡•Å‡§∏‡•ç‡§µ‡§æ‡§ó‡§§‡§Æ",
                for_practitioners: "‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡§ï‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è",
                practitioner_login_btn: "‡§≤‡•â‡§ó‡§ø‡§®",
                for_patients: "‡§∞‡•ã‡§ó‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è",
                patient_login_btn: "‡§≤‡•â‡§ó‡§ø‡§®",
                email_label: "‡§à‡§Æ‡•á‡§≤ ‡§™‡§§‡§æ",
                otp_label: "‡§ì‡§ü‡•Ä‡§™‡•Ä",
                verify_login_btn: "‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç",
                info_modal_title: "‡§™‡§Ç‡§ö‡§ï‡§∞‡•ç‡§Æ ‡§ï‡•ã ‡§∏‡§Æ‡§ù‡§®‡§æ",
                info_modal_p1: "‡§™‡§Ç‡§ö‡§ï‡§∞‡•ç‡§Æ ‡§µ‡§ø‡§∑‡§π‡§∞‡§£ ‡§î‡§∞ ‡§ï‡§æ‡§Ø‡§æ‡§ï‡§≤‡•ç‡§™ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡§∞‡§Æ ‡§Ü‡§Ø‡•Å‡§∞‡•ç‡§µ‡•á‡§¶‡§ø‡§ï ‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡§æ ‡§π‡•à...",
                info_modal_subtitle: "‡§™‡§æ‡§Ç‡§ö ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§™‡•ç‡§∞‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ‡§è‡§Ç",
                info_modal_l1: "<strong>‡§µ‡§Æ‡§® (‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡•Ä‡§Ø ‡§µ‡§Æ‡§®):</strong> ‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§ ‡§ï‡§´ ‡§¶‡•ã‡§∑ ‡§ï‡•ã ‡§ñ‡§§‡•ç‡§Æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§ø‡§§, ‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡§ï‡•Ä‡§Ø ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§™‡•ç‡§∞‡•á‡§∞‡§ø‡§§ ‡§â‡§≤‡•ç‡§ü‡•Ä ‡§™‡•ç‡§∞‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ...",
                info_modal_l2: "<strong>‡§µ‡§ø‡§∞‡•á‡§ö‡§® (‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡•Ä‡§Ø ‡§µ‡§ø‡§∞‡•á‡§ö‡§®):</strong> ‡§è‡§ï ‡§î‡§∑‡§ß‡•Ä‡§Ø ‡§µ‡§ø‡§∞‡•á‡§ö‡§® ‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡§æ ‡§ú‡•ã ‡§ú‡§†‡§∞‡§æ‡§Ç‡§§‡•ç‡§∞ ‡§∏‡§Ç‡§¨‡§Ç‡§ß‡•Ä ‡§Æ‡§æ‡§∞‡•ç‡§ó ‡§ï‡•ã ‡§∏‡§æ‡§´ ‡§ï‡§∞‡§§‡•Ä ‡§π‡•à...",
                info_modal_l3: "<strong>‡§¨‡§∏‡•ç‡§§‡•Ä (‡§î‡§∑‡§ß‡•Ä‡§Ø ‡§è‡§®‡•Ä‡§Æ‡§æ):</strong> ‡§∏‡§≠‡•Ä ‡§™‡§Ç‡§ö‡§ï‡§∞‡•ç‡§Æ ‡§â‡§™‡§ö‡§æ‡§∞‡•ã‡§Ç ‡§ï‡•Ä ‡§ú‡§®‡§®‡•Ä ‡§Æ‡§æ‡§®‡•Ä ‡§ú‡§æ‡§®‡•á ‡§µ‡§æ‡§≤‡•Ä ‡§¨‡§∏‡•ç‡§§‡•Ä ‡§Æ‡•á‡§Ç ‡§¨‡•É‡§π‡§¶‡§æ‡§®‡•ç‡§§‡•ç‡§∞ ‡§Æ‡•á‡§Ç ‡§π‡§∞‡•ç‡§¨‡§≤ ‡§§‡•á‡§≤‡•ã‡§Ç ‡§ï‡•ã ‡§°‡§æ‡§≤‡§®‡§æ ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§π‡•à...",
                info_modal_l4: "<strong>‡§®‡§∏‡•ç‡§Ø (‡§®‡§æ‡§∏‡§ø‡§ï ‡§™‡•ç‡§∞‡§∂‡§æ‡§∏‡§®):</strong> ‡§®‡§æ‡§ï ‡§ï‡•á ‡§Æ‡§æ‡§∞‡•ç‡§ó ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á ‡§î‡§∑‡§ß‡•Ä‡§Ø ‡§§‡•á‡§≤‡•ã‡§Ç ‡§ï‡§æ ‡§™‡•ç‡§∞‡§∂‡§æ‡§∏‡§®...",
                info_modal_l5: "<strong>‡§∞‡§ï‡•ç‡§§‡§Æ‡•ã‡§ï‡•ç‡§∑‡§£ (‡§∞‡§ï‡•ç‡§§‡§™‡§æ‡§§):</strong> ‡§∞‡§ï‡•ç‡§§ ‡§ï‡•ã ‡§∂‡•Å‡§¶‡•ç‡§ß ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§è‡§ï ‡§™‡•ç‡§∞‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ, ‡§ú‡§ø‡§∏‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§¨‡§π‡•Å‡§§ ‡§µ‡§ø‡§∂‡§ø‡§∑‡•ç‡§ü ‡§∏‡•ç‡§•‡§ø‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à...",
                suggestion1: "‡§™‡§Ç‡§ö‡§ï‡§∞‡•ç‡§Æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
                suggestion2: "‡§µ‡§ø‡§∞‡•á‡§ö‡§® ‡§ï‡•Ä ‡§µ‡•ç‡§Ø‡§æ‡§ñ‡•ç‡§Ø‡§æ ‡§ï‡§∞‡•á‡§Ç",
                suggestion3: "‡§Ü‡§Ø‡•Å‡§∏‡•Ç‡§§‡•ç‡§∞ ‡§ï‡•à‡§∏‡•á ‡§Æ‡§¶‡§¶ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à?",
                chat_placeholder: "‡§è‡§ï ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§™‡•Ç‡§õ‡•á‡§Ç...",
                login_error: "‡§Ö‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§à‡§Æ‡•á‡§≤ ‡§Ø‡§æ ‡§ì‡§ü‡•Ä‡§™‡•Ä‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®: ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§",
                chat_initial_greeting: "‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Æ‡•à‡§Ç ‡§™‡•ç‡§∞‡§ï‡•É‡§§‡§ø ‡§π‡•Ç‡§Å‡•§ ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§ï‡•à‡§∏‡•á ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•Ä ‡§π‡•Ç‡§Å?",
                chat_error: "‡§è‡§ï ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø ‡§π‡•Å‡§à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡§æ ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§ú‡§æ‡§Ç‡§ö‡•á‡§Ç ‡§î‡§∞ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§",
                chatbot_popup_greet: "‡§®‡§Æ‡§∏‡•ç‡§§‡•á! üëã",
                chatbot_popup_ask: "‡§Æ‡•Å‡§ù‡§∏‡•á ‡§è‡§ï ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§™‡•Ç‡§õ‡•á‡§Ç!",
                find_center_prompt: "‡§Æ‡•à‡§Ç ‡§á‡§∏‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•Ä ‡§π‡•Ç‡§Å! ‡§®‡§ø‡§ï‡§ü‡§§‡§Æ ‡§™‡§Ç‡§ö‡§ï‡§∞‡•ç‡§Æ ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞ ‡§ñ‡•ã‡§ú‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Æ‡•Å‡§ù‡•á ‡§Ö‡§™‡§®‡§æ ‡§∂‡§π‡§∞ ‡§Ø‡§æ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§¨‡§§‡§æ‡§è‡§Ç‡•§"
            }
        };

        // --- GLOBAL VARIABLES ---
        const userApiKey = "AIzaSyDp1j7NMv_3Xhgr1IwAWnvNbVlwZNyWTQE";
        let currentLanguage = 'en';

        // --- MODAL LOGIC & LANGUAGE SWITCHER ---
        const welcomeModal = document.getElementById('welcomeModal');
        const langBtnHi = document.getElementById('langBtnHi');
        const langBtnEn = document.getElementById('langBtnEn');
        
        function setLanguage(lang) {
            currentLanguage = lang;
            document.querySelectorAll('[data-translate-key]').forEach(el => {
                const key = el.getAttribute('data-translate-key');
                if (translations[lang][key] !== undefined) {
                    if (translations[lang][key] === "") {
                        el.style.display = 'none';
                    } else {
                        el.style.display = '';
                        el.innerHTML = translations[lang][key];
                    }
                }
            });
             if(lang === 'hi') {
                document.body.classList.add('hindi');
            } else {
                document.body.classList.remove('hindi');
            }
            const chatMessages = document.getElementById('chat-messages');
            chatMessages.innerHTML = '';
            appendMessage(translations[currentLanguage].chat_initial_greeting, 'bot');
        }
        
        function selectLanguage(lang) {
            setLanguage(lang);
            welcomeModal.classList.add('hidden');
        }

        langBtnHi.addEventListener('click', () => selectLanguage('hi'));
        langBtnEn.addEventListener('click', () => selectLanguage('en'));

        document.addEventListener('DOMContentLoaded', () => {
             welcomeModal.classList.remove('hidden');
             setLanguage('en'); 
             
             // Chatbot popup logic
             const chatbotPopup = document.getElementById('chatbot-popup');
             if (!sessionStorage.getItem('chatbotPopupShown')) {
                 setTimeout(() => {
                     chatbotPopup.style.opacity = '1';
                     chatbotPopup.style.transform = 'translateY(0)';
                     setTimeout(() => {
                         chatbotPopup.style.opacity = '0';
                         chatbotPopup.style.transform = 'translateY(10px)';
                         sessionStorage.setItem('chatbotPopupShown', 'true');
                     }, 5000);
                 }, 2000);
             }
        });


        const learnMoreBtn = document.getElementById('learnMoreBtn');
        const infoModal = document.getElementById('infoModal');
        const closeInfoModalBtn = document.getElementById('closeInfoModalBtn');
        const practitionerLoginBtn = document.getElementById('practitionerLoginBtn');
        const patientLoginBtn = document.getElementById('patientLoginBtn');
        const loginModal = document.getElementById('loginModal');
        const closeLoginModalBtn = document.getElementById('closeLoginModalBtn');
        const loginModalTitle = document.getElementById('loginModalTitle');
        const loginForm = document.getElementById('loginForm');
        const loginErrorMsg = document.getElementById('loginErrorMsg');
        const findCenterBtn = document.getElementById('findCenterBtn');

        function setupModal(openBtn, modal, closeBtn) {
            if (openBtn) openBtn.addEventListener('click', () => {
                modal.classList.remove('hidden');
                modal.classList.add('flex');
            });
            if (closeBtn) closeBtn.addEventListener('click', () => {
                 modal.classList.add('hidden');
                 modal.classList.remove('flex');
            });
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.add('hidden');
                    modal.classList.remove('flex');
                }
            });
        }
        
        setupModal(learnMoreBtn, infoModal, closeInfoModalBtn);
        
        let loginUserType = '';
        function openLoginModal(userType) {
            loginUserType = userType;
            loginModalTitle.textContent = translations[currentLanguage][userType === 'practitioner' ? 'practitioner_login_btn' : 'patient_login_btn'];
            const emailInput = document.getElementById('email');
            const otpInput = document.getElementById('otp');
            if(userType === 'practitioner'){
                emailInput.placeholder = 'doctor@ayursutra.gov.in';
                otpInput.placeholder = '123456';
            } else {
                emailInput.placeholder = 'patient@ayursutra.gov.in';
                otpInput.placeholder = '654321';
            }
            loginErrorMsg.textContent = '';
            loginForm.reset();
            loginModal.classList.remove('hidden');
            loginModal.classList.add('flex');
        }
        
        practitionerLoginBtn.addEventListener('click', () => openLoginModal('practitioner'));
        patientLoginBtn.addEventListener('click', () => openLoginModal('patient'));
        closeLoginModalBtn.addEventListener('click', () => {
            loginModal.classList.add('hidden');
            loginModal.classList.remove('flex');
        });
        loginModal.addEventListener('click', (e) => { 
            if (e.target === loginModal) {
                 loginModal.classList.add('hidden');
                 loginModal.classList.remove('flex');
            }
        });

        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = e.target.email.value;
            const otp = e.target.otp.value;
            loginErrorMsg.textContent = '';

            const practitionerCredentials = { email: 'doctor@ayursutra.gov.in', otp: '123456' };
            const patientCredentials = { email: 'patient@ayursutra.gov.in', otp: '654321' };

            if (loginUserType === 'practitioner' && email === practitionerCredentials.email && otp === practitionerCredentials.otp) {
                window.location.href = './practitioner_dashboard.html';
            } else if (loginUserType === 'patient' && email === patientCredentials.email && otp === patientCredentials.otp) {
                window.location.href = './patient_dashboard.html';
            } else {
                loginErrorMsg.textContent = translations[currentLanguage].login_error;
            }
        });

        // --- CHATBOT LOGIC ---
        const chatFab = document.getElementById('chat-fab');
        const chatWidget = document.getElementById('chat-widget');
        const closeChatBtn = document.getElementById('close-chat');
        const chatInput = document.getElementById('chat-input');
        const sendChatBtn = document.getElementById('send-chat');
        const chatMessages = document.getElementById('chat-messages');
        const suggestionChips = document.querySelectorAll('.suggestion-chip');

        chatFab.addEventListener('click', () => chatWidget.classList.toggle('visible'));
        closeChatBtn.addEventListener('click', () => chatWidget.classList.remove('visible'));
        
        findCenterBtn.addEventListener('click', (e) => {
            e.preventDefault();
            chatWidget.classList.add('visible');
            appendMessage(translations[currentLanguage].find_center_prompt, 'bot');
            chatInput.focus();
        });
        
        const sendMessage = async () => {
            const query = chatInput.value.trim();
            if (!query) return;

            appendMessage(query, 'user');
            chatInput.value = '';
            showTypingIndicator();
            
            const systemPrompt = `You are Prakriti, an AI assistant for the AyurSutra platform. Your roles are: 1. Provide clear information about Panchakarma, the software, and Ayurveda. 2. When a user provides a location (like a city name), identify registered Panchakarma centers near them. For demonstration, if the user mentions Delhi, Mumbai, or Bengaluru, list these centers: 'Sanjeevani Wellness Center, Karol Bagh, Delhi', 'Dhanwantari Ayurveda, Saket, Delhi', 'Atreya Panchakarma Clinic, Gurugram, NCR', 'AyurHeal, Bandra, Mumbai', 'Sattva Wellness, Juhu, Mumbai', 'Prakriti Shakti, Koramangala, Bengaluru'. Be friendly and informative. The user's current language is ${currentLanguage === 'hi' ? 'Hindi' : 'English'}. Respond in that language.`;
            
            try {
                const responseText = await callGeminiApi(query, systemPrompt);
                removeTypingIndicator();
                appendMessage(responseText, 'bot');
            } catch (error) {
                removeTypingIndicator();
                appendMessage(translations[currentLanguage].chat_error, 'bot');
            }
        };

        const callGeminiApi = async (userQuery, systemPrompt) => {
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${userApiKey}`;
            const payload = {
                contents: [{ "role": "user", "parts": [{ "text": userQuery }] }],
                systemInstruction: { "parts": [{ "text": systemPrompt }] },
            };
            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });
            if (!response.ok) {
                console.error("API Error:", response.status, await response.text());
                throw new Error(`API error: ${response.statusText}`);
            }
            const result = await response.json();
            return result.candidates?.[0]?.content?.parts?.[0]?.text || "I couldn't find an answer for that.";
        };

        const appendMessage = (text, sender) => {
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${sender === 'user' ? 'user-message' : 'bot-message'}`;
            messageDiv.textContent = text;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        };

        const showTypingIndicator = () => {
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typing-indicator';
            typingDiv.className = 'chat-message bot-message flex items-center space-x-2';
            const thinkingText = currentLanguage === 'hi' ? '‡§∏‡•ã‡§ö ‡§∞‡§π‡•Ä ‡§π‡•Ç‡§Å...' : 'Thinking...';
            typingDiv.innerHTML = `<div class="spinner"></div> <span>${thinkingText}</span>`;
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        };

        const removeTypingIndicator = () => {
            const indicator = document.getElementById('typing-indicator');
            if (indicator) indicator.remove();
        };

        sendChatBtn.addEventListener('click', sendMessage);
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });
        
        suggestionChips.forEach(chip => {
            chip.addEventListener('click', () => {
                chatInput.value = chip.textContent;
                sendMessage();
            });
        });

    </script>
</body>
</html>


